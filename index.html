<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solicitação de Interdição - SMU JF</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
<style>
:root { --primary: #0066cc; --secondary: #003366; }
body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; }
.header { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; padding: 1.5rem 0; }
.form-section { background: white; border-radius: 10px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.required::after { content: " *"; color: red; }
.section-title { color: var(--primary); border-bottom: 2px solid var(--primary); padding-bottom: 10px; margin-bottom: 20px; }
.logo-header { max-height: 70px; margin-right: 15px; }
.protocolo-info { background: #e7f3ff; border-left: 4px solid var(--primary); padding: 15px; border-radius: 5px; margin-bottom: 20px; }
.hidden-section { display: none; }
.section-divider { border-top: 2px dashed #dee2e6; margin: 2rem 0; padding-top: 2rem; }
</style>
</head>
<body>

<div class="header">
<div class="container">
<div class="d-flex align-items-center justify-content-center">
<img src="logo-horizontal.png" alt="Logo SMU" class="logo-header">
<div class="text-center">
<h1 class="mb-1" style="font-size:1.8rem;">SMU Juiz de Fora</h1>
<p class="mb-0" style="font-size:0.9rem;">Secretaria Municipal de Urbanismo</p>
<p class="mb-0"><small>Complemento de Dados para Interdição</small></p>
</div>
</div>
</div>
</div>

<div class="container py-4">
<form id="formInterdicao" enctype="multipart/form-data">
<div class="protocolo-info">
<h5><i class="bi bi-info-circle"></i> Informação Importante</h5>
<p>Preencha os dados de uma solicitação já existente, informando o <strong>número do protocolo</strong>.</p>
</div>

<div class="form-section">
<h3 class="section-title">1. Número do Protocolo</h3>
<div class="row">
<div class="col-md-6 mb-3">
<label class="form-label required">Número do Protocolo SMU</label>
<input type="text" class="form-control" name="numero_protocolo" required placeholder="Digite o número do protocolo" id="input-protocolo">
</div>
<div class="col-md-6 mb-3">
<label class="form-label">Data do Protocolo</label>
<input type="date" class="form-control" name="data_protocolo">
</div>
</div>
</div>

<div class="form-section">
<h3 class="section-title">2. Dados do Responsável</h3>
<div class="row">
<div class="col-md-6 mb-3">
<label class="form-label required">Nome Completo do Responsável</label>
<input type="text" class="form-control" name="nome_responsavel" required>
</div>
<div class="col-md-6 mb-3">
<label class="form-label required">Telefone</label>
<input type="tel" class="form-control" name="telefone" placeholder="(32) 99999-9999" required>
</div>
</div>
</div>

<div class="form-section">
<h3 class="section-title">3. Dados Básicos do Evento</h3>
<div class="row">
<div class="col-md-6 mb-3">
<label class="form-label required">Nome do Evento</label>
<input type="text" class="form-control" name="nome_evento" required>
</div>
<div class="col-md-6 mb-3">
<label class="form-label required">Tipo de Evento</label>
<select class="form-select" name="tipo_evento" required>
<option value="">Selecione...</option>
<option value="corrida">Corrida de Rua</option>
<option value="carnaval">Bloco de Carnaval</option>
<option value="festival">Festival</option>
<option value="show">Show/Espetáculo</option>
<option value="esportivo">Evento Esportivo</option>
<option value="religioso">Evento Religioso</option>
<option value="feira">Feira/Exposição</option>
<option value="obra">Obra/Construção</option>
<option value="manifestacao">Manifestação</option>
<option value="outro">Outro</option>
</select>
</div>
<div class="col-md-6 mb-3">
<label class="form-label required">Número de Participantes</label>
<input type="number" class="form-control" name="participantes" min="1" required>
</div>
<div class="col-md-6 mb-3">
<label class="form-label">Público Esperado</label>
<input type="number" class="form-control" name="publico_esperado" min="0">
</div>
<div class="col-md-12 mb-3">
<label class="form-label">Descrição do Evento</label>
<textarea class="form-control" name="descricao_evento" rows="2"></textarea>
</div>
</div>
</div>

<div class="form-section">
<h3 class="section-title">10. Anexos</h3>
<div class="row">
<div class="col-md-4 mb-3">
<label class="form-label">Ofício/Baixo-assinado</label>
<input type="file" class="form-control" name="file_oficio" accept=".pdf,.jpg,.png">
</div>
<div class="col-md-4 mb-3">
<label class="form-label">Croqui do Trajeto</label>
<input type="file" class="form-control" name="file_croqui" accept=".pdf,.jpg,.png">
</div>
<div class="col-md-4 mb-3">
<label class="form-label">CRLVs dos Veículos</label>
<input type="file" class="form-control" name="file_crlv" multiple accept=".pdf,.jpg,.png">
</div>
</div>
</div>

<div class="text-center mt-4">
<button type="submit" class="btn btn-primary btn-lg">Enviar Solicitação</button>
<button type="reset" class="btn btn-secondary btn-lg">Limpar</button>
</div>

</form>
</div>

<script>
const form = document.getElementById('formInterdicao');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = new FormData(form);

  try {
    const res = await fetch('http://localhost:3000/solicitacoes', {
      method: 'POST',
      body: formData
    });
    const data = await res.json();
    if (data.ok) {
      alert('Solicitação enviada com sucesso!');
      console.log(data.dados);
      form.reset();
    } else {
      alert('Erro ao enviar dados');
    }
  } catch (err) {
    console.error(err);
    alert('Erro na requisição');
  }
});
</script>

</body>
</html>
